<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goi√¢nia 2033: O Simulador Estrat√©gico</title>
    
    <!-- Carrega Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Carrega Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Estilo customizado para o Chart.js em dark mode */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* bg-gray-900 */
        }
        .chartjs-scale-label, .chartjs-point-label {
            font-size: 14px !important;
            font-weight: 600 !important;
        }
        .chartjs-point-label {
             color: #D1D5DB !important; /* text-gray-300 */
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <!-- Container Principal do Aplicativo -->
    <div class="bg-gray-800 rounded-2xl shadow-2xl p-8 md:p-12 w-full max-w-6xl m-4">

        <!-- Cabe√ßalho -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-emerald-400">Goi√¢nia 2033 - Simulador de Futuros</h1>
            <p class="text-lg text-gray-300 mt-2">Construa o futuro de Goi√¢nia, equilibrando o IGMA, os ODS e o esfor√ßo da sociedade.</p>
            <!-- NOTA ADICIONADA -->
            <p class="text-sm text-gray-400 mt-3 max-w-3xl mx-auto">
                <strong>IGMA:</strong> √çndice de Gest√£o Municipal Aquila (mede a efici√™ncia da gest√£o p√∫blica em 7 eixos) | <strong>ODS:</strong> Objetivos de Desenvolvimento Sustent√°vel (metas globais da ONU para 2030).
            </p>
        </header>

        <!-- Se√ß√£o do Jogo (Escolhas) -->
        <div id="game-container">
            <!-- Barra de Progresso -->
            <div class="w-full bg-gray-700 rounded-full h-2.5 mb-6">
                <div id="progress-bar" class="bg-emerald-500 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Coluna da Pergunta e Op√ß√µes -->
                <div>
                    <div class="text-center lg:text-left">
                        <h2 id="question-title" class="text-2xl font-semibold text-white mt-6 mb-2"></h2>
                        <!-- NOVO: Contexto Explicativo -->
                        <p id="question-context" class="text-gray-300 mb-4 text-base"></p>
                        <p id="question-text" class="text-gray-300 mb-6 text-lg font-semibold"></p>
                    </div>

                    <!-- Container das Op√ß√µes -->
                    <div id="options-container" class="grid grid-cols-1 gap-4">
                        <!-- Op√ß√µes ser√£o injetadas pelo JavaScript -->
                    </div>
                </div>

                <!-- Coluna dos Gr√°ficos Interativos -->
                <div class="bg-gray-900/50 p-6 rounded-lg">
                    <!-- NOVO: Gr√°fico de Esfor√ßo -->
                    <h3 class="font-semibold text-white mb-3 text-lg text-center">Medidor de Esfor√ßo (P√∫blico x Popula√ß√£o)</h3>
                    <div class="w-full max-h-[200px] flex items-center justify-center mb-4">
                        <canvas id="effort-chart-game"></canvas>
                    </div>
                    <!-- NOVO: Insight do Esfor√ßo -->
                    <div class="bg-gray-700 p-4 rounded-lg min-h-[100px]">
                        <h4 class="font-semibold text-emerald-300 mb-2">Papel de Cada Um:</h4>
                        <p id="effort-insight-text" class="text-sm text-gray-300">Fa√ßa sua primeira escolha para ver a an√°lise de esfor√ßo.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Se√ß√£o de Resultado (Gr√°fico e Insights) -->
        <div id="result-container" class="hidden">
            <h2 id="result-title" class="text-3xl font-bold text-emerald-400 mb-6 text-center"></h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                
                <!-- Coluna da Esquerda: Gr√°ficos Finais -->
                <div class="space-y-6">
                    <!-- Gr√°fico de Radar Final -->
                    <div>
                        <!-- T√≠tulo ATUALIZADO -->
                        <h3 class="font-semibold text-white mb-1 text-lg text-center">Resultado Final (IGMA x ODS)</h3>
                        <!-- NOTA ADICIONADA -->
                        <p class="text-xs text-gray-400 text-center mb-3">(Scores ODS s√£o normalizados de 0-100 para a escala 0-10)</p>
                        <div class="w-full max-h-[350px] flex items-center justify-center">
                            <canvas id="radar-chart-result"></canvas>
                        </div>
                    </div>
                    <!-- Gr√°fico de Esfor√ßo Final -->
                    <div>
                        <h3 class="font-semibold text-white mb-3 text-lg text-center">Esfor√ßo Total Acumulado</h3>
                        <div class="w-full max-h-[200px] flex items-center justify-center">
                            <canvas id="effort-chart-result"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Coluna da Direita: Cen√°rio e Insights -->
                <div class="space-y-6">
                    <!-- Imagem e Descri√ß√£o do Cen√°rio -->
                    <div>
                        <img id="result-image" 
                             src="https://placehold.co/600x400/34d399/1f2937?text=Goi%C3%A2nia+2033" 
                             alt="Visualiza√ß√£o do futuro de Goi√¢nia" 
                             class="rounded-lg shadow-lg mb-4 w-full h-auto object-cover">
                        <p id="result-description" class="text-gray-300 mb-4 text-base"></p>
                    </div>

                    <!-- Insights Estrat√©gicos (Pontos Fortes/Fracos) -->
                    <div id="strategic-insights" class="my-6">
                        <h3 class="font-semibold text-white mb-3 text-lg">Insights Estrat√©gicos (IGMA)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Coluna de Pontos Fortes -->
                            <div>
                                <h4 class="font-semibold text-emerald-400 mb-2 flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                    Eixos em Destaque
                                </h4>
                                <div id="strengths-list" class="space-y-3"></div>
                            </div>
                            <!-- Coluna de Pontos de Aten√ß√£o -->
                            <div>
                                <h4 class="font-semibold text-rose-400 mb-2 flex items-center">
                                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.01-1.742 3.01H4.42c-1.53 0-2.493-1.676-1.743-3.01l5.58-9.92zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                                    Pontos de Aten√ß√£o
                                </h4>
                                <div id="weaknesses-list" class="space-y-3"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Insights ODS -->
                    <div id="ods-impacts" class="text-sm text-gray-400">
                        <h3 class="font-semibold text-white mb-2 text-lg">Impacto nos ODS</h3>
                        <!-- Insights ODS ser√£o injetados aqui -->
                    </div>
                    
                    <button id="restart-button" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-6 rounded-lg transition-colors text-lg mt-6">
                        Jogar Novamente
                    </button>
                </div>
            </div>
        </div>

        <!-- NOVO: Se√ß√£o de Fontes -->
        <footer class="text-center mt-12 border-t border-gray-700 pt-6">
            <h4 class="font-semibold text-lg text-gray-300 mb-2">Fontes e Refer√™ncias</h4>
            <p class="text-xs text-gray-500">
                Este simulador √© um exerc√≠cio de foresight estrat√©gico e design de futuros. Os dados s√£o baseados em:
                <br>
                <a href="https://igma.aquila.com.br/cidades/759" target="_blank" class="text-emerald-400 hover:underline">IGMA - √çndice de Gest√£o Municipal Aquila (Goi√¢nia)</a> |
                <a href="https://www.goiania.go.gov.br/plano-diretor/" target="_blank" class="text-emerald-400 hover:underline">Plano Diretor de Goi√¢nia</a> |
                <a href="https://www.goiania.go.gov.br/planmobgyn-2021/" target="_blank" class="text-emerald-400 hover:underline">PlanmobGyn (Plano de Mobilidade)</a> |
                <a href="https://brasil.un.org/pt-br/sdgs" target="_blank" class="text-emerald-400 hover:underline">Objetivos de Desenvolvimento Sustent√°vel (ODS/ONU)</a> |
                <a href="https://cidades.ibge.gov.br/brasil/go/goiania/panorama" target="_blank" class="text-emerald-400 hover:underline">IBGE Cidades (Goi√¢nia)</a>
            </p>
            <!-- RODAP√â ADICIONADO -->
            <p class="text-sm text-gray-400 mt-6">
                Elaborado por Antonio Balduino Neto - Especialista em Foresight Estrat√©gico e Design de Futuros
            </p>
        </footer>

    </div>

    <script>
        // --- 1. CONFIGURA√á√ÉO DO JOGO ---

        let currentStep = 0;
        let radarChart = null;
        let effortChartGame = null; // Gr√°fico de esfor√ßo do jogo
        let effortChartResult = null; // Gr√°fico de esfor√ßo do resultado

        // Eixos do Gr√°fico de Radar (Baseado nas 7 Dimens√µes do IGMA)
        // ATUALIZADO: Eixos mostram o mapeamento dos ODS
        const labels = [
            'Educa√ß√£o (ODS 4)',
            'Sa√∫de (ODS 3)',
            'Seguran√ßa (ODS 16)',
            'Saneamento/Ambiente (ODS 6,12,13)',
            'Gest√£o Fiscal',
            'Infra/Mobilidade (ODS 9,11)',
            'Socioecon√¥mico (ODS 8)'
        ];

        // Estado inicial dos scores (Linha de Base = 5) para os eixos IGMA
        let scores = {
            educacao: 5, saude: 5, seguranca: 5, saneamento_ambiente: 5,
            gestao_fiscal: 5, infra_mobilidade: 5, socioecon√¥mico: 5
        };
        
        // NOVO: Estado inicial do esfor√ßo (come√ßa equilibrado)
        let effortScores = { publico: 10, populacao: 10 };
        let lastEffortInsight = "Fa√ßa sua primeira escolha para ver a an√°lise de esfor√ßo.";

        // Estado inicial e impacto dos ODS (0 a 100%)
        let odsScores = {
            'ODS 3 - Sa√∫de': 50, 'ODS 4 - Educa√ß√£o': 50, 'ODS 6 - √Ågua e Saneamento': 50,
            'ODS 8 - Trabalho Decente e Crescimento Econ√¥mico': 50, 'ODS 9 - Ind√∫stria, Inova√ß√£o e Infraestrutura': 50,
            'ODS 11 - Cidades e Comunidades Sustent√°veis': 50, 'ODS 12 - Consumo e Produ√ß√£o Respons√°veis': 50,
            'ODS 13 - A√ß√£o Contra a Mudan√ßa Global do Clima': 50, 'ODS 16 - Paz, Justi√ßa e Institui√ß√µes Eficazes': 50,
        };

        // Perguntas com CONTEXTO, IMPACTOS DE ESFOR√áO e INSIGHTS DE ESFOR√áO
        const questions = [
            {
                title: "Desafio 1: O Dilema da Habita√ß√£o üè°",
                context: "Goi√¢nia cresce rapidamente, mas esse crescimento tem sido horizontal (espraiamento). Isso encarece a infraestrutura (√°gua, esgoto, asfalto, √¥nibus) e deixa o centro da cidade com muitos lotes vazios, gerando ociosidade.",
                text: "Onde devemos focar a constru√ß√£o de 100.000 novas moradias?",
                optionA: {
                    text: "Facilitar condom√≠nios na periferia (Espraiamento)",
                    description: "Expande a mancha urbana, mas aumenta dist√¢ncias e custos.",
                    impacts: { infra_mobilidade: -2, saneamento_ambiente: -1, socioeconomico: -1, gestao_fiscal: -1 },
                    ods: { 'ODS 11 - Cidades e Comunidades Sustent√°veis': -15 },
                    effort: { publico: 4, populacao: 1 }, // Alto custo p√∫blico para levar infra
                    effort_insight: "Esta escolha exige alto esfor√ßo do Poder P√∫blico para levar infraestrutura (asfalto, √°gua, sa√∫de) a √°reas distantes, com baixo envolvimento da popula√ß√£o."
                },
                optionB: {
                    text: "Incentivar moradias no Centro e √°reas vazias (Adensamento)",
                    description: "Revitaliza √°reas j√° estruturadas, otimiza servi√ßos e transporte.",
                    impacts: { infra_mobilidade: +2, saneamento_ambiente: +1, socioeconomico: +2, gestao_fiscal: +1 },
                    ods: { 'ODS 11 - Cidades e Comunidades Sustent√°veis': +20, 'ODS 8 - Trabalho Decente e Crescimento Econ√¥mico': +10 },
                    effort: { publico: 3, populacao: 3 }, // Esfor√ßo p√∫blico (incentivos) e privado (vontade de morar)
                    effort_insight: "Esta escolha exige um esfor√ßo equilibrado: do Poder P√∫blico (incentivos fiscais, seguran√ßa) e da Popula√ß√£o (mudan√ßa cultural para viver em √°reas centrais e verticais)."
                }
            },
            {
                title: "Desafio 2: A Guerra do Tr√¢nsito üöóüöå",
                context: "A frota de ve√≠culos individuais cresce mais r√°pido que a popula√ß√£o. O resultado s√£o congestionamentos, polui√ß√£o e alto tempo de deslocamento, impactando a sa√∫de mental e a produtividade da cidade.",
                text: "Qual deve ser a prioridade de investimento em mobilidade?",
                optionA: {
                    text: "Expandir viadutos, pontes e estacionamentos para carros.",
                    description: "Prioriza o transporte individual, solu√ß√µes que incentivam mais carros.",
                    impacts: { infra_mobilidade: -2, saude: -1, saneamento_ambiente: -1, seguranca: -1 },
                    ods: { 'ODS 11 - Cidades e Comunidades Sustent√°veis': -10, 'ODS 13 - A√ß√£o Contra a Mudan√ßa Global do Clima': -10 },
                    effort: { publico: 5, populacao: 0 }, // Custo 100% p√∫blico, zero mudan√ßa de h√°bito
                    effort_insight: "Esta escolha √© baseada em alto esfor√ßo do Poder P√∫blico (custo de obras). Ela n√£o exige nenhuma mudan√ßa de comportamento da Popula√ß√£o."
                },
                optionB: {
                    text: "Executar o plano de BRTs, ciclovias e cal√ßadas (PlanmobGyn).",
                    description: "Prioriza o pedestre, o transporte coletivo e ativo, reduzindo polui√ß√£o.",
                    impacts: { infra_mobilidade: +3, saude: +2, saneamento_ambiente: +1, socioeconomico: +1 },
                    ods: { 'ODS 11 - Cidades e Comunidades Sustent√°veis': +20, 'ODS 3 - Sa√∫de': +15, 'ODS 13 - A√ß√£o Contra a Mudan√ßa Global do Clima': +15 },
                    effort: { publico: 3, populacao: 4 }, // Custo p√∫blico (obras) e alta ades√£o da popula√ß√£o
                    effort_insight: "Esta escolha exige um esfor√ßo muito alto da Popula√ß√£o (mudar h√°bitos, deixar o carro) e um esfor√ßo alto do Poder P√∫blico (investir e manter o sistema de qualidade)."
                }
            },
            {
                title: "Desafio 3: A Montanha de Lixo ‚ôªÔ∏è",
                context: "Goi√¢nia gera mais de 1,2 mil toneladas de lixo por dia, mas recicla menos de 5%. A maior parte vai para o aterro, reduzindo sua vida √∫til e perdendo a chance de gerar renda e proteger o meio ambiente.",
                text: "Como melhorar a gest√£o de res√≠duos s√≥lidos?",
                optionA: {
                    text: "Manter o sistema atual, focar em novos aterros sanit√°rios.",
                    description: "Solu√ß√£o reativa e insustent√°vel a longo prazo, com altos custos ambientais.",
                    impacts: { saneamento_ambiente: -3, saude: -1, gestao_fiscal: -1 },
                    ods: { 'ODS 12 - Consumo e Produ√ß√£o Respons√°veis': -20, 'ODS 11 - Cidades e Comunidades Sustent√°veis': -10, 'ODS 3 - Sa√∫de': -10 },
                    effort: { publico: 3, populacao: 0 }, // Custo p√∫blico (novo aterro)
                    effort_insight: "Esta escolha exige esfor√ßo cont√≠nuo do Poder P√∫blico (encontrar e gerir novos aterros) e esfor√ßo zero da Popula√ß√£o."
                },
                optionB: {
                    text: "Investir pesado em compostagem, coleta seletiva e educa√ß√£o.",
                    description: "Ataca a raiz do problema, gera novos neg√≥cios e limpa a cidade.",
                    impacts: { saneamento_ambiente: +3, saude: +1, socioeconomico: +1, educacao: +1, gestao_fiscal: +1 },
                    ods: { 'ODS 12 - Consumo e Produ√ß√£o Respons√°veis': +25, 'ODS 11 - Cidades e Comunidades Sustent√°veis': +15, 'ODS 8 - Trabalho Decente e Crescimento Econ√¥mico': +10 },
                    effort: { publico: 3, populacao: 5 }, // Esfor√ßo p√∫blico (log√≠stica) e m√°ximo da popula√ß√£o (separar lixo)
                    effort_insight: "Esta √© uma solu√ß√£o de esfor√ßo m√°ximo da Popula√ß√£o (separar o lixo corretamente) e alto esfor√ßo do Poder P√∫blico (criar a log√≠stica de coleta e usinas)."
                }
            },
            {
                title: "Desafio 4: O Motor da Economia üìà",
                context: "A economia de Goi√¢nia √© forte em servi√ßos, com√©rcio e agroneg√≥cio. No entanto, para competir no futuro, √© preciso diversificar e investir em √°reas que gerem empregos de maior valor agregado e retenham talentos.",
                text: "Qual deve ser a voca√ß√£o econ√¥mica para gerar empregos e riqueza?",
                optionA: {
                    text: "Foco total na Log√≠stica do Agroneg√≥cio e Ind√∫stria tradicional.",
                    description: "Refor√ßa a voca√ß√£o atual, mas pode n√£o gerar empregos qualificados em massa.",
                    impacts: { socioeconomico: +2, infra_mobilidade: -1, saneamento_ambiente: -1 },
                    ods: { 'ODS 8 - Trabalho Decente e Crescimento Econ√¥mico': +15 },
                    effort: { publico: 3, populacao: 1 }, // Esfor√ßo p√∫blico em infraestrutura de carga
                    effort_insight: "Esta escolha exige esfor√ßo do Poder P√∫blico (obras de infraestrutura de carga) e baixo esfor√ßo de qualifica√ß√£o da Popula√ß√£o em geral."
                },
                optionB: {
                    text: "Foco em Economia Digital, Sa√∫de e Turismo (ex: Art D√©co).",
                    description: "Diversifica a economia, atrai novos talentos e revitaliza a cultura.",
                    impacts: { socioeconomico: +2, educacao: +1, infra_mobilidade: +1, gestao_fiscal: +1 },
                    ods: { 'ODS 8 - Trabalho Decente e Crescimento Econ√¥mico': +20, 'ODS 9 - Ind√∫stria, Inova√ß√£o e Infraestrutura': +15, 'ODS 11 - Cidades e Comunidades Sustent√°veis': +10 },
                    effort: { publico: 3, populacao: 4 }, // Esfor√ßo p√∫blico (fomento) e da popula√ß√£o (educa√ß√£o)
                    effort_insight: "Exige alto esfor√ßo da Popula√ß√£o (qualifica√ß√£o, empreendedorismo) e do Poder P√∫blico (fomento √† inova√ß√£o, educa√ß√£o e infraestrutura digital)."
                }
            },
            {
                title: "Desafio 5: O Fosso do Saneamento üíß",
                context: "Apesar dos avan√ßos, centenas de milhares de pessoas em Goi√¢nia ainda n√£o t√™m acesso √† rede de esgoto. Isso causa doen√ßas (ODS 3), polui rios (ODS 6) e desvaloriza bairros inteiros.",
                text: "Quase 26% da cidade (400.000 pessoas) ainda n√£o tem rede de esgoto. Como agir?",
                optionA: {
                    text: "Manter o ritmo atual de investimento, priorizando outras obras.",
                    description: "O problema ser√° resolvido lentamente, comprometendo sa√∫de e meio ambiente.",
                    impacts: { saude: -2, saneamento_ambiente: -2, socioeconomico: -2 },
                    ods: { 'ODS 6 - √Ågua e Saneamento': -20, 'ODS 3 - Sa√∫de': -15 },
                    effort: { publico: 1, populacao: 0 }, // Baixo esfor√ßo p√∫blico (in√©rcia)
                    effort_insight: "Esta escolha representa um baixo esfor√ßo do Poder P√∫blico (manter o ritmo atual) e nenhum esfor√ßo da Popula√ß√£o, que continua sofrendo o impacto."
                },
                optionB: {
                    text: "Acelerar para 100% de esgoto tratado at√© 2030.",
                    description: "Investimento alto agora para resolver o ODS 6 e garantir sa√∫de p√∫blica.",
                    impacts: { saude: +3, saneamento_ambiente: +2, socioeconomico: +2, gestao_fiscal: -1 }, // Custo fiscal alto
                    ods: { 'ODS 6 - √Ågua e Saneamento': +30, 'ODS 3 - Sa√∫de': +20, 'ODS 11 - Cidades e Comunidades Sustent√°veis': +10 },
                    effort: { publico: 5, populacao: 2 }, // Esfor√ßo p√∫blico (obras) e da popula√ß√£o (custo/taxa)
                    effort_insight: "Exige esfor√ßo m√°ximo do Poder P√∫blico (investimento e obras) e um esfor√ßo da Popula√ß√£o (pagar taxas e lidar com os transtornos tempor√°rios das obras)."
                }
            },
            {
                title: "Desafio 6: A Qualidade da Educa√ß√£o üìö",
                context: "Embora o acesso √† escola esteja quase universalizado, o desafio de Goi√¢nia (e do Brasil) √© a qualidade. O IDEB mostra que h√° muito a melhorar para que os jovens estejam prontos para o futuro (ODS 4).",
                text: "Melhorar a educa√ß√£o b√°sica √© chave para o futuro. Onde investir os recursos?",
                optionA: {
                    text: "Focar na expans√£o de vagas, construindo mais escolas.",
                    description: "Aumenta o acesso, mas n√£o garante a qualidade ou a inova√ß√£o pedag√≥gica.",
                    impacts: { educacao: +1, gestao_fiscal: -1, socioeconomico: +1 },
                    ods: { 'ODS 4 - Educa√ß√£o': +15 },
                    effort: { publico: 3, populacao: 0 }, // Custo p√∫blico (obras)
                    effort_insight: "Uma escolha de esfor√ßo focado no Poder P√∫blico (constru√ß√£o de pr√©dios), com baixo impacto na mudan√ßa pedag√≥gica ou no envolvimento da Popula√ß√£o."
                },
                optionB: {
                    text: "Investir em forma√ß√£o de professores, tecnologia e tempo integral.",
                    description: "Melhora a qualidade do ensino, atrai talentos e prepara para o mercado.",
                    impacts: { educacao: +3, socioeconomico: +2, gestao_fiscal: -2 }, // Custo fiscal de pessoal
                    ods: { 'ODS 4 - Educa√ß√£o': +25, 'ODS 8 - Trabalho Decente e Crescimento Econ√¥mico': +10, 'ODS 9 - Ind√∫stria, Inova√ß√£o e Infraestrutura': +10 },
                    effort: { publico: 4, populacao: 3 }, // Esfor√ßo p√∫blico (sal√°rios, tech) e da popula√ß√£o (ades√£o)
                    effort_insight: "Exige esfor√ßo alto do Poder P√∫blico (investir em pessoas e tecnologia) e da Popula√ß√£o (professores em forma√ß√£o, pais e alunos se adaptando ao tempo integral)."
                }
            },
            {
                title: "Desafio 7: A Seguran√ßa Urbana üö®",
                context: "A sensa√ß√£o de seguran√ßa impacta diretamente a qualidade de vida e o uso da cidade (ODS 16). Bairros percebidos como inseguros se tornam desertos, gerando mais inseguran√ßa. √â um ciclo vicioso.",
                text: "A seguran√ßa √© uma preocupa√ß√£o constante. Como tornar Goi√¢nia mais segura?",
                optionA: {
                    text: "Aumentar o efetivo policial e o patrulhamento ostensivo.",
                    description: "Medida reativa que pode gerar sensa√ß√£o de seguran√ßa, mas n√£o ataca as causas.",
                    impacts: { seguranca: +1, gestao_fiscal: -1, socioeconomico: -1 },
                    ods: { 'ODS 16 - Paz, Justi√ßa e Institui√ß√µes Eficazes': +10 },
                    effort: { publico: 4, populacao: 0 }, // Custo p√∫blico (pessoal)
                    effort_insight: "Esta escolha foca 100% do esfor√ßo no Poder P√∫blico (aumento de efetivo e custos), sem exigir uma mudan√ßa de postura ou participa√ß√£o da Popula√ß√£o."
                },
                optionB: {
                    text: "Investir em intelig√™ncia, monitoramento e requalifica√ß√£o de espa√ßos.",
                    description: "Abordagem preventiva que melhora a seguran√ßa e o uso da cidade.",
                    impacts: { seguranca: +3, socioeconomico: +2, infra_mobilidade: +1, gestao_fiscal: -2 },
                    ods: { 'ODS 16 - Paz, Justi√ßa e Institui√ß√µes Eficazes': +25, 'ODS 11 - Cidades e Comunidades Sustent√°veis': +15 },
                    effort: { publico: 3, populacao: 3 }, // Esfor√ßo p√∫blico (tech) e da popula√ß√£o (ocupar espa√ßos)
                    effort_insight: "Exige esfor√ßo do Poder P√∫blico (tecnologia, ilumina√ß√£o) e um esfor√ßo crucial da Popula√ß√£o (ocupar os parques e pra√ßas, criando 'olhos na rua')."
                }
            },
            {
                title: "Desafio 8: A Sa√∫de da Popula√ß√£o ü©∫",
                context: "O modelo de sa√∫de focado em hospitais (curativo) √© caro e sobrecarregado. O ODS 3 (Sa√∫de e Bem-Estar) incentiva um foco maior na preven√ß√£o, tratando problemas antes que se agravem.",
                text: "O sistema de sa√∫de est√° sobrecarregado. Qual √© a melhor estrat√©gia?",
                optionA: {
                    text: "Construir novos hospitais e unidades de pronto atendimento.",
                    description: "Expande a capacidade, mas foca na doen√ßa, n√£o na preven√ß√£o.",
                    impacts: { saude: +1, gestao_fiscal: -2 },
                    ods: { 'ODS 3 - Sa√∫de': +15 },
                    effort: { publico: 5, populacao: 0 }, // Custo p√∫blico (obras e equipamentos)
                    effort_insight: "Esta √© uma solu√ß√£o de esfor√ßo m√°ximo do Poder P√∫blico (obras, equipamentos, pessoal), focada em tratar a doen√ßa. N√£o exige mudan√ßa de h√°bitos da Popula√ß√£o."
                },
                optionB: {
                    text: "Investir em aten√ß√£o prim√°ria, sa√∫de da fam√≠lia e telemedicina.",
                    description: "Foca na preven√ß√£o, descentraliza o atendimento e usa tecnologia.",
                    impacts: { saude: +3, socioeconomico: +1, gestao_fiscal: +1 }, // Mais eficiente
                    ods: { 'ODS 3 - Sa√∫de': +25, 'ODS 9 - Ind√∫stria, Inova√ß√£o e Infraestrutura': +10 },
                    effort: { publico: 3, populacao: 4 }, // Esfor√ßo p√∫blico (gest√£o) e da popula√ß√£o (preven√ß√£o)
                    effort_insight: "Exige alto esfor√ßo da Popula√ß√£o (fazer exames preventivos, usar o postinho do bairro) e do Poder P√∫blico (gerir a rede de aten√ß√£o prim√°ria e telemedicina)."
                }
            },
            {
                title: "Desafio 9: A Cultura e o Patrim√¥nio üé®",
                context: "Goi√¢nia tem o maior acervo Art D√©co da Am√©rica Latina, um patrim√¥nio subutilizado. Valorizar a cultura (ODS 11) n√£o √© apenas preservar pr√©dios, mas gerar emprego, turismo e senso de pertencimento.",
                text: "Como valorizar a identidade Art D√©co e a cultura da cidade?",
                optionA: {
                    text: "Focar em eventos pontuais e grandes shows para atrair turistas.",
                    description: "Gera visibilidade de curto prazo, mas n√£o cria um legado cultural sustent√°vel.",
                    impacts: { socioeconomico: +1 },
                    ods: { 'ODS 11 - Cidades e Comunidades Sustent√°veis': +5 },
                    effort: { publico: 3, populacao: 1 }, // Custo p√∫blico (cach√™s)
                    effort_insight: "Exige esfor√ßo do Poder P√∫blico (patroc√≠nio de eventos), com um papel passivo da Popula√ß√£o (consumidora dos shows)."
                },
                optionB: {
                    text: "Requalificar o Setor Central, restaurar edif√≠cios e criar museus.",
                    description: "Fortalece a identidade, atrai turismo cultural e promove a ocupa√ß√£o.",
                    impacts: { socioeconomico: +2, infra_mobilidade: +1, educacao: +1, gestao_fiscal: +1 },
                    ods: { 'ODS 11 - Cidades e Comunidades Sustent√°veis': +20, 'ODS 8 - Trabalho Decente e Crescimento Econ√¥mico': +10 },
                    effort: { publico: 4, populacao: 3 }, // Custo p√∫blico (restauro) e da popula√ß√£o (ocupar)
                    effort_insight: "Exige alto esfor√ßo do Poder P√∫blico (restauro, seguran√ßa) e da Popula√ß√£o (empreendedores, artistas e cidad√£os ocupando e valorizando o centro)."
                }
            },
            {
                title: "Desafio 10: Governan√ßa e Transpar√™ncia üèõÔ∏è",
                context: "A confian√ßa na gest√£o √© a base da democracia (ODS 16). Sem transpar√™ncia e participa√ß√£o, as pol√≠ticas p√∫blicas perdem legitimidade e o cidad√£o n√£o se sente parte das solu√ß√µes, apenas v√≠tima dos problemas.",
                text: "Como melhorar a governan√ßa e a participa√ß√£o cidad√£?",
                optionA: {
                    text: "Focar em sistemas internos de controle e auditoria.",
                    description: "Importante, mas n√£o √© percebido pela popula√ß√£o como transpar√™ncia.",
                    impacts: { gestao_fiscal: +1, socioeconomico: +1 },
                    ods: { 'ODS 16 - Paz, Justi√ßa e Institui√ß√µes Eficazes': +10 },
                    effort: { publico: 3, populacao: 0 }, // Esfor√ßo interno do governo
                    effort_insight: "Esta escolha foca o esfor√ßo 100% dentro do Poder P√∫blico (controladoria, auditoria), sem envolver a Popula√ß√£o no processo."
                },
                optionB: {
                    text: "Implementar plataformas de participa√ß√£o digital e dados abertos.",
                    description: "Empodera o cidad√£o, aumenta a transpar√™ncia e a legitimidade.",
                    impacts: { gestao_fiscal: +2, socioeconomico: +2, educacao: +1, infra_mobilidade: +1 },
                    ods: { 'ODS 16 - Paz, Justi√ßa e Institui√ß√µes Eficazes': +25, 'ODS 9 - Ind√∫stria, Inova√ß√£o e Infraestrutura': +10 },
                    effort: { publico: 3, populacao: 4 }, // Esfor√ßo p√∫blico (plataforma) e da popula√ß√£o (participar)
                    effort_insight: "Exige alto esfor√ßo da Popula√ß√£o (doar tempo para participar, fiscalizar) e do Poder P√∫blico (criar e manter canais de escuta e dados abertos)."
                }
            }
        ];


        // --- 2. L√ìGICA DO JOGO ---

        document.addEventListener('DOMContentLoaded', () => {
            // Inicializa os dois gr√°ficos de radar (um para o jogo, um para o resultado)
            radarChart = initRadarChart('radar-chart-result'); // O gr√°fico do resultado
            
            // Inicializa os dois gr√°ficos de esfor√ßo
            effortChartGame = initEffortChart('effort-chart-game');
            effortChartResult = initEffortChart('effort-chart-result');

            showQuestion(); // Mostra a primeira pergunta
            updateEffortChart(); // Atualiza o gr√°fico de esfor√ßo para o estado inicial
            
            document.getElementById('restart-button').addEventListener('click', restartGame);
        });

        // Mostra a pergunta atual
        function showQuestion() {
            if (currentStep >= questions.length) {
                showResult();
                return;
            }

            // Atualiza barra de progresso
            const progress = ((currentStep + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            const q = questions[currentStep];
            document.getElementById('question-title').innerText = q.title;
            document.getElementById('question-context').innerText = q.context; // NOVO
            document.getElementById('question-text').innerText = q.text;
            document.getElementById('effort-insight-text').innerText = lastEffortInsight; // Atualiza o insight

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            // Cria o bot√£o para a Op√ß√£o A
            const buttonA = createOptionButton(q.optionA, 'A');
            buttonA.addEventListener('click', () => selectOption(q.optionA));
            optionsContainer.appendChild(buttonA);

            // Cria o bot√£o para a Op√ß√£o B
            const buttonB = createOptionButton(q.optionB, 'B');
            buttonB.addEventListener('click', () => selectOption(q.optionB));
            optionsContainer.appendChild(buttonB);
        }

        // Cria um bot√£o de op√ß√£o
        function createOptionButton(option, type) {
            const button = document.createElement('div');
            button.className = "bg-gray-700 p-6 rounded-lg border-2 border-gray-600 hover:border-emerald-500 transform hover:scale-105 transition-all cursor-pointer";
            button.innerHTML = `
                <h3 class="font-semibold text-lg text-white">${option.text}</h3>
                <p class="text-gray-400 text-sm mt-1">${option.description}</p>
            `;
            return button;
        }

        // Processa a escolha do usu√°rio
        function selectOption(choice) {
            // 1. Aplica os impactos nos scores do IGMA
            const impacts = choice.impacts;
            for (const key in impacts) {
                if (scores.hasOwnProperty(key)) {
                    scores[key] += impacts[key];
                    if (scores[key] > 10) scores[key] = 10;
                    if (scores[key] < 0) scores[key] = 0;
                }
            }

            // 2. Aplica os impactos nos scores dos ODS
            const odsImpacts = choice.ods;
            for (const key in odsImpacts) {
                if (odsScores.hasOwnProperty(key)) {
                    odsScores[key] += odsImpacts[key];
                    if (odsScores[key] > 100) odsScores[key] = 100;
                    if (odsScores[key] < 0) odsScores[key] = 0;
                }
            }
            
            // 3. NOVO: Aplica impactos de esfor√ßo
            effortScores.publico += choice.effort.publico;
            effortScores.populacao += choice.effort.populacao;
            lastEffortInsight = choice.effort_insight; // Armazena o insight da escolha

            // 4. Atualiza o gr√°fico de esfor√ßo do JOGO
            updateEffortChart();

            // 5. Avan√ßa para a pr√≥xima pergunta
            currentStep++;
            showQuestion();
        }

        // Mostra a tela de resultados
        function showResult() {
            document.getElementById('game-container').classList.add('hidden');
            document.getElementById('result-container').classList.remove('hidden');
            
            // Calcula o score m√©dio final para determinar o cen√°rio
            const finalIgmaScores = Object.values(scores);
            const avgIgmaScore = finalIgmaScores.reduce((a, b) => a + b, 0) / finalIgmaScores.length;

            const finalOdsScores = Object.values(odsScores);
            const avgOdsScore = finalOdsScores.reduce((a, b) => a + b, 0) / finalOdsScores.length;

            let scenario;
            let odsInsights = "";

            // L√≥gica dos Cen√°rios
            if (avgIgmaScore < 4.5) {
                scenario = {
                    title: "Cen√°rio: Goi√¢nia 2033 - O Futuro Desorganizado",
                    image: "https://placehold.co/600x400/b91c1c/f9fafb?text=Futuro+Congestionado+e+Desigual",
                    description: "Bem-vindo a Goi√¢nia 2033. Suas escolhas levaram a um crescimento desordenado. A infraestrutura b√°sica est√° sobrecarregada, o tr√¢nsito √© ca√≥tico e a desigualdade socioecon√¥mica se aprofundou. A gest√£o fiscal enfrenta desafios para sustentar a expans√£o. A qualidade de vida geral e o ambiente n√£o melhoraram."
                };
                odsInsights = "Muitos ODS est√£o estagnados ou regrediram, especialmente **ODS 11 (Cidades Sustent√°veis)**, **ODS 6 (Saneamento)** e **ODS 13 (A√ß√£o Clim√°tica)**. A√ß√µes limitadas em sustentabilidade impactaram negativamente a agenda 2030.";
            } else if (avgIgmaScore >= 7.5 && avgOdsScore >= 70) {
                scenario = {
                    title: "Cen√°rio: Goi√¢nia 2033 - O Centen√°rio Sustent√°vel e IGMA de Excel√™ncia!",
                    image: "https://placehold.co/600x400/059669/f9fafb?text=Futuro+Pr%C3%B3spero+e+Inclusivo",
                    description: "Parab√©ns! Suas decis√µes constru√≠ram uma Goi√¢nia exemplar para o centen√°rio. A cidade se destaca em todas as dimens√µes do IGMA: Educa√ß√£o, Sa√∫de, Seguran√ßa, Saneamento, Infraestrutura, Desenvolvimento Socioecon√¥mico e Gest√£o Fiscal. Uma cidade humana, inovadora e resiliente!"
                };
                odsInsights = "A maioria dos ODS foi fortemente impulsionada, com destaque para **ODS 11 (Cidades Sustent√°veis)**, **ODS 3 (Sa√∫de)**, **ODS 4 (Educa√ß√£o)**, **ODS 6 (Saneamento)** e **ODS 16 (Paz e Justi√ßa)**. Goi√¢nia √© um modelo de alinhamento com a Agenda 2030!";
            } else {
                scenario = {
                    title: "Cen√°rio: Goi√¢nia 2033 - Progresso com Desafios",
                    image: "https://placehold.co/600x400/0284c7/f9fafb?text=Futuro+Eficiente+mas+com+Lacunas",
                    description: "Sua Goi√¢nia 2033 mostra progresso em algumas √°reas, como infraestrutura e saneamento, mas ainda enfrenta desafios. A efici√™ncia pode ter sido priorizada sobre a inclus√£o social ou a sustentabilidade. A gest√£o √© competente, mas h√° oportunidades perdidas para um desenvolvimento mais equilibrado."
                };
                odsInsights = "Houve avan√ßo em alguns ODS, como **ODS 6 (Saneamento)** e **ODS 9 (Infraestrutura)**, mas outros como **ODS 13 (A√ß√£o Clim√°tica)** e **ODS 12 (Consumo Respons√°vel)** ainda precisam de mais aten√ß√£o. Um caminho de progresso, mas com lacunas a serem preenchidas.";
            }

            // ATUALIZADO: Mapeia os scores dos ODS (0-100) para a escala do gr√°fico (0-10)
            const odsNormalizedData = [
                odsScores['ODS 4 - Educa√ß√£o'] / 10, // Mapeia para 'Educa√ß√£o'
                odsScores['ODS 3 - Sa√∫de'] / 10, // Mapeia para 'Sa√∫de'
                odsScores['ODS 16 - Paz, Justi√ßa e Institui√ß√µes Eficazes'] / 10, // Mapeia para 'Seguran√ßa'
                (odsScores['ODS 6 - √Ågua e Saneamento'] + odsScores['ODS 12 - Consumo e Produ√ß√£o Respons√°veis'] + odsScores['ODS 13 - A√ß√£o Contra a Mudan√ßa Global do Clima']) / 30, // M√©dia dos 3 ODS / 10
                null, // 'Gest√£o Fiscal' n√£o tem ODS direto
                (odsScores['ODS 9 - Ind√∫stria, Inova√ß√£o e Infraestrutura'] + odsScores['ODS 11 - Cidades e Comunidades Sustent√°veis']) / 20, // M√©dia dos 2 ODS / 10
                odsScores['ODS 8 - Trabalho Decente e Crescimento Econ√¥mico'] / 10  // Mapeia para 'Socioecon√¥mico'
            ];

            // Atualiza os dados do gr√°fico de RADAR de resultado
            radarChart.data.datasets[0].data = Object.values(scores); // Data 1: IGMA
            radarChart.data.datasets[1].data = odsNormalizedData; // Data 2: ODS
            radarChart.update();

            // Atualiza o gr√°fico de ESFOR√áO de resultado
            effortChartResult.data.datasets[0].data = [effortScores.publico, effortScores.populacao];
            effortChartResult.update();


            // Atualiza a UI do resultado
            document.getElementById('result-title').innerText = scenario.title;
            document.getElementById('result-image').src = scenario.image;
            document.getElementById('result-image').alt = scenario.title;
            document.getElementById('result-description').innerText = scenario.description;

            // Gera√ß√£o de Insights Estrat√©gicos Din√¢micos
            const strengthsList = document.getElementById('strengths-list');
            const weaknessesList = document.getElementById('weaknesses-list');
            strengthsList.innerHTML = '';
            weaknessesList.innerHTML = '';

            const scoreEntries = Object.keys(scores).map((key, index) => {
                return { key: key, label: labels[index], score: scores[key] };
            });

            scoreEntries.sort((a, b) => b.score - a.score);

            const topScores = scoreEntries.slice(0, 2).filter(item => item.score > 5.5);
            if (topScores.length > 0) {
                topScores.forEach(item => {
                    strengthsList.innerHTML += createInsightCard(item, 'strength');
                });
            } else {
                strengthsList.innerHTML = `<p class="text-sm text-gray-400">Nenhum eixo se destacou positivamente.</p>`;
            }

            const bottomScores = scoreEntries.slice(-2).reverse().filter(item => item.score < 4.5);
            if (bottomScores.length > 0) {
                bottomScores.forEach(item => {
                    weaknessesList.innerHTML += createInsightCard(item, 'weakness');
                });
            } else {
                weaknessesList.innerHTML = `<p class="text-sm text-gray-400">Nenhum eixo ficou criticamente descoberto.</p>`;
            }

            // Atualiza Insights ODS
            const odsImpactsDiv = document.getElementById('ods-impacts');
            odsImpactsDiv.innerHTML = `<h3 class="font-semibold text-white mb-2 text-lg">Impacto nos ODS</h3><p>${odsInsights.replace(/\*\*(.*?)\*\*/g, '<strong class="text-emerald-300">$1</strong>')}</p>`;
            
            let odsDetails = '';
            for (const ods in odsScores) {
                const score = odsScores[ods].toFixed(0);
                const color = score > 65 ? 'bg-emerald-600' : score < 40 ? 'bg-rose-600' : 'bg-gray-600';
                odsDetails += `<span class="inline-block ${color} text-white px-3 py-1 rounded-full text-xs mr-2 mb-2">${ods}: ${score}%</span>`;
            }
            odsImpactsDiv.innerHTML += `<div class="mt-4">${odsDetails}</div>`;
        }

        // Reinicia o jogo
        function restartGame() {
            currentStep = 0;
            scores = { educacao: 5, saude: 5, seguranca: 5, saneamento_ambiente: 5, gestao_fiscal: 5, infra_mobilidade: 5, socioeconomico: 5 };
            odsScores = {
                'ODS 3 - Sa√∫de': 50, 'ODS 4 - Educa√ß√£o': 50, 'ODS 6 - √Ågua e Saneamento': 50,
                'ODS 8 - Trabalho Decente e Crescimento Econ√¥mico': 50, 'ODS 9 - Ind√∫stria, Inova√ß√£o e Infraestrutura': 50,
                'ODS 11 - Cidades e Comunidades Sustent√°veis': 50, 'ODS 12 - Consumo e Produ√ß√£o Respons√°veis': 50,
                'ODS 13 - A√ß√£o Contra a Mudan√ßa Global do Clima': 50, 'ODS 16 - Paz, Justi√ßa e Institui√ß√µes Eficazes': 50,
            };
            // NOVO: Reseta scores de esfor√ßo
            effortScores = { publico: 10, populacao: 10 };
            lastEffortInsight = "Fa√ßa sua primeira escolha para ver a an√°lise de esfor√ßo.";
            
            document.getElementById('result-container').classList.add('hidden');
            document.getElementById('game-container').classList.remove('hidden');
            
            updateEffortChart(); // Atualiza o gr√°fico de esfor√ßo do jogo
            showQuestion();
        }

        // --- 3. L√ìGICA DOS GR√ÅFICOS ---

        // NOVO: Helper para criar card de insight
        function createInsightCard(item, type) {
            const isStrength = type === 'strength';
            const bgColor = 'bg-gray-700/50';
            const borderColor = isStrength ? 'border-emerald-500' : 'border-rose-500';
            const textColor = isStrength ? 'text-emerald-400' : 'text-rose-400';
            
            return `
                <div class="${bgColor} p-3 rounded-lg border-l-4 ${borderColor} shadow-sm">
                    <div class="flex justify-between items-center">
                        <p class="text-sm font-semibold text-white">${item.label}</p>
                        <p class="text-sm font-bold ${textColor}">${item.score.toFixed(1)}</p>
                    </div>
                </div>
            `;
        }
        
        // Inicializa o gr√°fico de RADAR
        function initRadarChart(canvasId) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            return new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [
                    {
                        label: 'Desempenho (IGMA)',
                        data: Object.values(scores), // Come√ßa com os scores base
                        fill: true,
                        backgroundColor: 'rgba(52, 211, 153, 0.2)', // emerald-400
                        borderColor: 'rgba(52, 211, 153, 1)',
                        pointBackgroundColor: 'rgba(52, 211, 153, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(52, 211, 153, 1)'
                    },
                    // NOVO: Dataset para os ODS
                    {
                        label: 'Desempenho (ODS Normalizado)',
                        data: [5, 5, 5, 5, null, 5, 5], // Come√ßa com a linha de base (null para Gest√£o Fiscal)
                        fill: true,
                        backgroundColor: 'rgba(59, 130, 246, 0.2)', // blue-500
                        borderColor: 'rgba(59, 130, 246, 1)',
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(59, 130, 246, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.2)' },
                            grid: { color: 'rgba(255, 255, 255, 0.2)' },
                            pointLabels: {
                                color: '#D1D5DB',
                                font: { size: 13, weight: '600', family: 'Inter, sans-serif' }
                            },
                            ticks: {
                                color: '#9CA3AF', backdropColor: '#1F2937', stepSize: 2, font: { size: 10 }
                            },
                            min: 0,
                            max: 10
                        }
                    },
                    plugins: {
                        // ATUALIZADO: Mostra a legenda para diferenciar IGMA e ODS
                        legend: { 
                            display: true,
                            labels: {
                                color: '#D1D5DB' // text-gray-300
                            }
                        },
                        tooltip: { 
                            callbacks: { 
                                label: (context) => {
                                    // Evita mostrar tooltip para 'Gest√£o Fiscal' dos ODS
                                    if (context.raw === null) return null;
                                    return `${context.dataset.label}: ${context.raw.toFixed(1)}`;
                                }
                            } 
                        }
                    }
                }
            });
        }

        // NOVO: Inicializa o gr√°fico de ESFOR√áO (Horizontal Bar)
        function initEffortChart(canvasId) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            return new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Poder P√∫blico', 'Popula√ß√£o'],
                    datasets: [{
                        label: 'Esfor√ßo Acumulado',
                        data: [effortScores.publico, effortScores.populacao],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.7)', // blue-500
                            'rgba(52, 211, 153, 0.7)'  // emerald-400
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(52, 211, 153, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', // Faz o gr√°fico ser horizontal
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#9CA3AF' }
                        },
                        y: {
                            grid: { display: false },
                            ticks: { color: '#D1D5DB', font: { size: 14, weight: '600' } }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: (context) => `Esfor√ßo: ${context.raw}` } }
                    }
                }
            });
        }

        // NOVO: Atualiza o gr√°fico de ESFOR√áO do jogo
        function updateEffortChart() {
            if (effortChartGame) {
                effortChartGame.data.datasets[0].data = [effortScores.publico, effortScores.populacao];
                effortChartGame.update();
            }
        }

    </script>
</body>
</html>

